<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.prime.com.tr/ui"
>    
    <f:loadBundle basename="Language" var="msg" />
    <f:loadBundle basename="Newsletter" var="nlk" />
    <h:head>        
    </h:head>
    <script type="text/javascript">
        var hcontent = jQuery('input[id*="hcontent"]');
        function initEditor() {
            return hcontent.val();
        }
        function editorContentChanged(a){
            hcontent.val(a);
        }
    </script>
    <h:body>        
        <h2>#{nlk['newsletter.admin.templates.add']}</h2>
        <br></br>
        <h:form id="edit-template-email-form">
            <h:inputHidden value="#{templateCRUDManagedBean.id}"/>
            <h:inputHidden value="#{templateCRUDManagedBean.action}"/>
            <p:dialog header="#{nlk['newsletter.admin.template.help']}" widgetVar="dlg3" showEffect="bounce" hideEffect="explode" height="400" width="400" resizable="false">  
                <h:outputText value="#{templateCRUDManagedBean.helpPageText}" escape="false"/>  
            </p:dialog>            
            
            <p:commandButton styleClass="newsletter-forms-button" value="#{msg['newsletter.admin.category.general.help']}" onclick="dlg3.show();" type="button"/> 
            <br/><br/>
            
            <h:outputLabel value="#{msg['newsletter.admin.general.name']}: " />
            <h:inputText styleClass="newsletter-forms-input-text" value="#{templateCRUDManagedBean.name}" />
            
            <h:inputHidden value="#{templateCRUDManagedBean.template}" id="hcontent"/>
            <iframe height="450" id="editortest" name="editortest" src="/html/js/editor/editor.jsp?p_l_id=#{templateCRUDManagedBean.plid}&amp;p_main_path=%2Fde%2Fc&amp;doAsUserId=#{templateCRUDManagedBean.doAsUserId}&amp;editorImpl=ckeditor&amp;toolbarSet=liferay-article&amp;initMethod=initEditor&amp;onChangeMethod=editorContentChanged&amp;cssPath=%2Fhtml%2Fthemes%2Fcontrol_panel%2Fcss&amp;cssClasses=portlet+portlet-journal" style="border: none;" width="95%"></iframe>
            
            <p:growl id="editSubscriptionMailMessage"/>
            <p:commandButton styleClass="newsletter-forms-button" value="#{msg['newsletter.admin.general.edit']}" update="editSubscriptionMailMessage" action="#{templateCRUDManagedBean.save}" ajax="false"/>
            <p:button styleClass="newsletter-forms-button" outcome="admin" value="#{msg['newsletter.admin.general.cancel']}" />            
        </h:form>
    </h:body>
</html>

